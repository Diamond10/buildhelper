@import tags._
@import tools.Constants

@(account: Account, coses: List[COS], pageIndex: Integer, totalAmount: Integer)

@sidemenu("engineer", 8) {
	<link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/froala/font-awesome.min.css")">
	<link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/simplePagination.css")">
	<script src="@routes.Assets.versioned("javascripts/jquery.simplePagination.js")" type="text/javascript"></script>
	<script>
		$(function(){
			var pageParts = $(".paginate");
		    var numPages = pageParts.length;
		    var perPage = @Constants.ACCOUNT_PAGE_SIZE;
		    
		    pageParts.slice(perPage).hide();
		    $("#page-nav").pagination({
		        items: @totalAmount,
		        itemsOnPage: perPage,
		        currentPage: @pageIndex,
		        cssStyle: "light-theme",
		        onPageClick: function(pageNum) {
		            var start = perPage * (pageNum - 1);
		            var end = start + perPage;
		            
		            $('#page-offset').val(start);
		            $('form#page-form').submit();
		        }
		    });
		});	
		
	</script>
	<div class="dash-detail-header">
		<table class="header-tb">
			<tr>
				<td class="left-content" width="70%">
					<div class="note-title">Additional & Alterations Works For Two Storey Semi-detached House and Erection of Two New Staircase at No.9 Lyndhurst Road, Singapore 438092 [Gondola]</div>
				</td>
				<td class="right-content"  width="30%">
					<div class="link-group">
						<a class="btn btn-success download-btn" href="">Download</a>
						<a class="btn btn-success print-btn" href="">Print</a>
						<a class="btn btn-success export-btn" href="">Export Summary</a>
					</div>
				</td>
			</tr>
		</table>
	</div>
	
	@if(coses == null || coses.size == 0){
		<p class="empty">Sorry, The project doesn't have any COSï½ž</p>
	}else{
		
		<div class="dash-block">	
			<table class="table table-striped table-hover lesson-table">
			    <thead>
			      <tr>
			        <th>S/N</th>
			        <th>Location</th>
			        <th>Subject</th>
			        <th>Inspection Date</th>
			        <th>Issue Date</th>
			        <th>Action</th>
			      </tr>
			    </thead>
			    <tbody>
			    	@for(index <- 0 until coses.size){
					    <tr class="paginate">
							<th>@((pageIndex-1) * Constants.ACCOUNT_PAGE_SIZE + index+1)</th>
							<td>@coses(index).location</td>
							<td>@coses(index).subject</td>
							<td>@coses(index).inspectDate</td>
							<td>@coses(index).issueDate</td>
							<td>
								<a href="" class="action-btn h-print-action center-align">Print<br>Hard Copy</a>
								<a class="action-btn upload-action center-align">Upload <br> Hard Copy</a>
								<a class="action-btn s-print-action center-align">Print<br>E-Copy</a>
								@if(coses(index).passType == "approve"){
									<a class="approve-action action-btn center-align" >Approved</a>
								}else{
									@if(coses(index).passType == "reject"){
										<a class="reject-action action-btn center-align" >Rejected</a>
									}else{
										<a class="upload-action action-btn center-align" href="@routes.COSController.inspectCOS(coses(index).id)">Inspect<br>COS</a>
									}
								}
							</td>
				        </tr>
					}
			    </tbody>
			</table>
			<div class="pagination-wrap">	
				<div id="page-nav"></div>
				<form id="page-form" class="hidden" action="@routes.COSController.viewCOS()" method="get">
					<input id="page-offset" type="hidden" name="offset" value="0"/>
				</form>
			</div>
		</div>	
	}
}